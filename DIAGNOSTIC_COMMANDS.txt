##############################################################################
#                    🔍 أوامر التشخيص الفعلي - نفذها واحد تلو الآخر         #
##############################################################################

🚨 المشكلة: جميع محاولات الدخول فاشلة حتى مع البيانات القديمة
🎯 الهدف: اكتشاف البيانات الحقيقية المستخدمة في الكونتينرات الشغالة

##############################################################################
#                         📊 الخطوة الأولى: فحص الكونتينرات               #
##############################################################################

نفذ هذا الأمر وأرسل لي النتيجة:

docker ps -a | grep -E "(db|mysql|phpmyadmin)"

##############################################################################
#                      📊 الخطوة الثانية: فحص المتغيرات البيئية            #
##############################################################################

نفذ هذه الأوامر واحد تلو الآخر وأرسل النتائج:

# فحص متغيرات FirstProject DB
docker exec firstproject-db env | grep MYSQL

# فحص متغيرات Admin DB  
docker exec admin-db env | grep MYSQL

# فحص متغيرات User DB
docker exec user-db env | grep MYSQL

##############################################################################
#                       📊 الخطوة الثالثة: فحص المستخدمين                 #
##############################################################################

نفذ هذه الأوامر لرؤية المستخدمين الفعليين:

# FirstProject Database Users
docker exec firstproject-db mysql -u root --skip-password -e "SELECT user,host FROM mysql.user;" 2>/dev/null || echo "Root needs password"

# جرب بدون كلمة مرور
docker exec firstproject-db mysql --user=root --password= -e "SELECT user,host FROM mysql.user;" 2>/dev/null || echo "Empty password failed"

# جرب root مع كلمات مرور مختلفة
docker exec firstproject-db mysql -u root -proot -e "SELECT user,host FROM mysql.user;" 2>/dev/null || echo "Password 'root' failed"

##############################################################################
#                      📊 الخطوة الرابعة: فحص التكوين الفعلي               #
##############################################################################

نفذ هذا الأمر لرؤية التكوين الفعلي:

docker compose config 2>/dev/null | grep -A15 -B5 firstproject-db: || echo "Docker compose config failed"

##############################################################################
#                       📊 الخطوة الخامسة: فحص اللوجات                    #
##############################################################################

نفذ هذه الأوامر لرؤية لوجات الكونتينرات:

# فحص لوجات FirstProject DB
docker logs firstproject-db --tail=20

# فحص لوجات phpMyAdmin
docker logs phpmyadmin --tail=20

##############################################################################
#                      📊 الخطوة السادسة: الدخول المباشر                  #
##############################################################################

جرب الدخول المباشر لكونتينر قاعدة البيانات:

# الدخول لكونتينر قاعدة البيانات
docker exec -it firstproject-db bash

# من داخل الكونتينر، جرب:
mysql -u root -p
# جرب كلمات مرور: (فارغة), root, password, firstproject_pass

# أو جرب:
mysql -u root
mysql --user=root --password=

##############################################################################
#                        📊 الخطوة السابعة: فحص الملفات                   #
##############################################################################

فحص ملفات البيئة الموجودة:

ls -la | grep env
ls -la .env* 2>/dev/null || echo "No .env files found"

##############################################################################
#                         📊 الخطوة الثامنة: فحص البورتات                 #
##############################################################################

فحص البورتات المفتوحة:

netstat -tulpn | grep 330
ss -tulpn | grep 330

##############################################################################
#                        🎯 أوامر تشخيص شاملة سريعة                       #
##############################################################################

نفذ هذا السكريبت الشامل ونسخ لي كل النتيجة:

echo "=== DOCKER CONTAINERS STATUS ==="
docker ps -a | grep -E "(db|mysql|phpmyadmin)"

echo -e "\n=== FIRSTPROJECT DB ENVIRONMENT ==="
docker exec firstproject-db env | grep MYSQL

echo -e "\n=== FIRSTPROJECT DB USERS (NO PASSWORD) ==="
docker exec firstproject-db mysql -u root --skip-password -e "SELECT user,host FROM mysql.user;" 2>/dev/null || echo "Root password required"

echo -e "\n=== FIRSTPROJECT DB USERS (EMPTY PASSWORD) ==="
docker exec firstproject-db mysql -u root -p'' -e "SELECT user,host FROM mysql.user;" 2>/dev/null || echo "Empty password failed"

echo -e "\n=== DOCKER COMPOSE CONFIG ==="
docker compose config 2>/dev/null | grep -A10 -B5 firstproject-db || echo "Config failed"

echo -e "\n=== ENVIRONMENT FILES ==="
ls -la | grep env

echo -e "\n=== PORT STATUS ==="
netstat -tulpn | grep 3309

echo -e "\n=== FIRSTPROJECT DB LOGS ==="
docker logs firstproject-db --tail=10

##############################################################################
#                              💡 التوجيه                                 #
##############################################################################

🎯 نفذ السكريبت الشامل أعلاه ونسخ لي النتيجة كاملة
🔍 بناءً على النتائج سأحدد المشكلة الدقيقة
🚀 هدفنا: الوصول للبيانات الحقيقية وحل المشكلة نهائياً

##############################################################################
#                            🚨 ملاحظة مهمة                               #
##############################################################################

⚠️  إذا كانت الكونتينرات غير شغالة، شغلها أولاً:
docker compose up -d

⚠️  إذا كان docker compose غير متاح، استخدم:
docker-compose up -d 